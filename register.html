<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register</title>
<style>
body{margin:0;font-family:Arial;background:#f6f7f9}
.header{background:linear-gradient(90deg,#ff6b6b,#ff8e8e);color:#fff;text-align:center;padding:25px}
.title{text-align:center;color:#ff6b6b;margin:15px;font-weight:bold}
.line{width:120px;height:3px;background:#ff6b6b;margin:0 auto}
.box{padding:15px;position:relative}
.label{margin:12px 0 5px}
.input{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd}
.eye{position:absolute;right:25px;margin-top:-38px;cursor:pointer;font-size:18px}
.btn-main{width:100%;padding:15px;border-radius:25px;border:none;
background:linear-gradient(90deg,#ff6b6b,#ff8e8e);color:#fff;
font-size:16px;margin-top:15px;opacity:.5}
.btn-main:enabled{opacity:1}
.bottom{text-align:center;margin-top:10px}
.chat{position:fixed;right:15px;bottom:15px;background:#ff6b6b;color:#fff;
width:55px;height:55px;border-radius:50%;display:flex;
align-items:center;justify-content:center;font-size:22px}
  .top-header{
  background: linear-gradient(90deg,#ff6b6b,#ff8e8e);
  padding: 25px 0 15px;
  text-align: center;
}
.top-header img{
  width: 120px;
  height: auto;
  display: block;
  margin: 0 auto 10px;
}

.subtitle{
  color: #fff;
  font-size: 14px;
}
</style>
</head>
<body>

<div class="top-header">
  <img src="../Mylogo.png" alt="My Logo">
  <p class="subtitle">Please register by phone number or email</p>
</div>

<div class="title">Register your phone</div>
<div class="line"></div>

<div class="box">
  <div class="label">ğŸ“± Phone number</div>
  <input class="input" id="phone" placeholder="+91  Please enter the phone number">

  <div class="label">ğŸ”’ Set password</div>
  <input type="password" class="input" id="pass1" placeholder="Set password">
  <span class="eye" id="eye1">ğŸ‘</span>

  <div class="label">ğŸ”’ Confirm password</div>
  <input type="password" class="input" id="pass2" placeholder="Confirm password">
  <span class="eye" id="eye2">ğŸ‘</span>

  <div class="label">ğŸ« Invite code</div>
  <input class="input" id="invite" placeholder="invite code">

  <p>
    <input type="checkbox" id="agree">
    I have read and agree <span style="color:#ff6b6b">[Privacy Agreement]</span>
  </p>

  <button class="btn-main" id="registerBtn" disabled>Register</button>

  <div class="bottom">
    I have an account 
    <a href="login.html" style="color:#ff6b6b;font-weight:bold;">Login</a>
  </div>
</div>

<div class="chat" id="supportBtn">ğŸ’¬</div>

<!-- Firebase Compat -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCSKLOKjHWNImv5bmxzOTCthvQd8iWa6aQ",
  authDomain: "big-d28e3.firebaseapp.com",
  projectId: "big-d28e3",
  storageBucket: "big-d28e3.firebasestorage.app",
  messagingSenderId: "509862839346",
  appId: "1:509862839346:web:ec80fc33a33eb19610e82b"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Elements
const phone = document.getElementById("phone");
const pass1 = document.getElementById("pass1");
const pass2 = document.getElementById("pass2");
const invite = document.getElementById("invite");
const agree = document.getElementById("agree");
const btn = document.getElementById("registerBtn");
const eye1 = document.getElementById("eye1");
const eye2 = document.getElementById("eye2");
const supportBtn = document.getElementById("supportBtn");

// Eye toggle
eye1.onclick = ()=> toggle(pass1,eye1);
eye2.onclick = ()=> toggle(pass2,eye2);
function toggle(pass,eye){
  if(pass.type==="password"){pass.type="text";eye.innerText="ğŸ‘";}
  else{pass.type="password";eye.innerText="ğŸ™ˆ";}
}

// Agree checkbox
agree.onchange = ()=> btn.disabled = !agree.checked;

// Register
btn.onclick = ()=>{
  if(!phone.value || !pass1.value || !pass2.value){
    alert("Please fill all fields"); return;
  }
  if(pass1.value!==pass2.value){
    alert("Passwords do not match"); return;
  }

  const email = phone.value + "@bigpro.com";

  auth.createUserWithEmailAndPassword(email, pass1.value)
  .then(res=>{
    const uid = res.user.uid;
    return db.collection("Users").doc(uid).set({
      phone: phone.value,
      invite: invite.value,
      wallet: 0,
      createdAt: Date.now()
    });
  })
  .then(()=>{
    alert("Registration Successful!");
    window.location.href="login.html";
  })
  .catch(err=> alert(err.message));
};

// WhatsApp Support
supportBtn.onclick = ()=>{
  const num="916205702371";
  const msg="Hello, mujhe website me problem aa rahi hai. Please help.";
  window.open("https://wa.me/"+num+"?text="+encodeURIComponent(msg),"_blank");
};
</script>
</body>
</html>
